<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Test WebViewer Thunkable</title>
</head>
<body>
<h2>Test WebViewer</h2>
<p id="status">In attesa messaggio...</p>

<script>
// Funzione per inviare messaggi a Thunkable
function sendToThunkable(msg){
    if(window.ReactNativeWebView && window.ReactNativeWebView.postMessage){
        window.ReactNativeWebView.postMessage(msg);
        console.log("Inviato a Thunkable:", msg);
    } else {
        console.warn("ReactNativeWebView non disponibile:", msg);
    }
}

// Funzione per verificare la ricezione del messaggio da Thunkable
window.addEventListener("message", function(event){
    const data = event.data;
    console.log("Messaggio ricevuto:", data);

    const status = document.getElementById("status");
    status.innerText = "Ricevuto dall'app: " + data;

    // Verifica se Ã¨ una URL
    if(data && typeof data === "string" && (data.startsWith("http://") || data.startsWith("https://"))){
        sendToThunkable(JSON.stringify({testURL: data, ok: true}));
    } else {
        sendToThunkable(JSON.stringify({testURL: null, ok: false}));
    }
});
</script>
</body>
</html>